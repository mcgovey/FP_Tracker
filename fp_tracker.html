<template name="main">
    {{> navigation}}
    {{> yield}}
</template>


<template name="navigation">
	<nav class="navbar navbar-inverse">
		<div class="navbar-header">
	      <a class="navbar-brand" href="{{pathFor route='home'}}">FP Tracker</a>
	    </div>
	    <div>
		    <ul class="nav navbar-nav">
		        <li><a href="{{pathFor route='home'}}">Home</a></li>
		        <!-- <li><a href="{{pathFor route='viewLeads'}}">View all Leads</a></li> -->
		        <li><a href="{{pathFor route='addLead'}}">Add a New Lead</a></li>
		        <li><a href="{{pathFor route='searchLead'}}">Search for a Lead</a></li>
		    </ul>
		</div>
		<div id="loginButtons" class="btn btn-primary dropdown-toggle nav">{{> loginButtons}}</div>
	</nav>
</template>

<template name="home">
    
    <p>Welcome to FP Tracker {{log currentUser}}</p>

    {{> leads}}
</template>

<template name="leads">
    <a href="{{pathFor route='addLead'}}"><div class="bigBtn btn btn-primary">Add a Lead</div></a>
    <a href="{{pathFor route='searchLead'}}"><div class="bigBtn btn btn-primary">Search for a Lead</div></a>
	<button id="exportAll" type="button" class="btnRawCSV btn-info btn-sm">ExportData</button>
    <div class="container">
	    <table id="viewLeadsTable" class="table table-bordered table-hover">
	    	<tr>
	    		<th>FP Name   </th>
	    		<th>Inquiry Date</th>
	    		<th>Source</th>
	    		<th>Source Details</th>
	    		<th>Expected Orientation Date</th>
	    		<th>Followup Date</th>
	    		<th>Orientation Attended Date</th>
	    		<th>Application Submitted Date</th>
	    		<th>Delete</th>
	    	</tr>
	    	{{#each lead}}
	    		{{> leadItem}}
	    	{{/each}}
	    </table>
	</div>
</template>

<template name="leadItem">
	
	<tr>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{name}} 			</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{inquiryDate}} 	</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{source}} 			</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{sourceDetails}}	</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{expectOrientDate}}	</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{followupDate}}	</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{orientAttendDate}}	</div></a></td>
		<td><a class="clickView" href="lead/{{_id}}"><div class="clickView">{{appSubmitDate}}	</div></a></td>
		<td><a href="#" class="delete-lead">Delete</a></td>
    </tr>
    </template>

<template name="addLead">
	<h2 class="pageLabel">Add a New Potential Foster Parent</h2>
	{{> leadForm}}	
</template>

<template name="leadForm">
	<form id="newLeadForm">
		<div class="form-group">
		  <label for="name">Name:</label>
		  <input type="text" value={{name}} name="leadName" class="form-control" id="name">
		</div>

		<div class="form-group">
		  <label for="leadInquiryDate">Date of Inquiry Origination:</label>
		  <input type="date" name="leadInquiryDate" value={{inquiryDate}} class="todayDefault form-control" id="leadInquiryDate">
		</div>

		<div class="form-group">
			<label for="leadSource">Referral Source: </label>
			<select class="form-control" name= "leadSource" id="leadSource">
			    <option disabled="disabled" selected="selected">Please Select</option>
			    {{#each categories}}
			        <option value="{{this}}">{{this}}</option>
			    {{/each}}
			</select>
		</div>

		<div class="form-group">
			<label for="sourceDetails">Referral Details:</label>
			<textarea class="form-control" rows="2" name="sourceDetails" id="sourceDetails" value="{{sourceDetails}}"></textarea>
		</div>

		<div class="form-group">
		  <label for="leadExpectedOrientation">Date of Inquiry Origination:</label>
		  <input type="date" name="leadExpectedOrientation" value={{expectOrientDate}} class="form-control" id="leadExpectedOrientation">
		</div>

		<div class="form-group">
		  <label for="leadFollowupDate">Date of Inquiry Origination:</label>
		  <input type="date" name="leadFollowupDate" value={{followupDate}} class="form-control" id="leadFollowupDate">
		</div>

		<div class="form-group">
		  <label for="leadOrientAttendDate">Date of Inquiry Origination:</label>
		  <input type="date" name="leadOrientAttendDate" value={{orientAttendDate}} class="form-control" id="leadOrientAttendDate">
		</div>

		<div class="form-group">
		  <label for="leadAppSubmitDate">Date of Inquiry Origination:</label>
		  <input type="date" name="leadAppSubmitDate" value={{appSubmitDate}} class="form-control" id="leadAppSubmitDate">
		</div>

		{{#if _id}}
    	<button id="submit" type="submit" class="">Update FP</button>
    	{{else}}
    	<button id="submit" type="submit" class="">Create FP</button>
    	{{/if}}
	</form>
</template>

<template name="editLead">
	<h2 class="pageLabel">Edit this potential foster parent</h2>
	{{> leadForm}}
	{{setDropdownValue}}
</template>

<template name="searchLead">
	page to search for a lead
</template>

<!-- <template name="export">
  <h3>Export</h3>
  <p>To export your data, click the button below.</p>
  <button class="export-data btn btn-success" data-loading-text="Exporting...">Export Data</button>
</template> -->